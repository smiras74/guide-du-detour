<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Guide du D√©tour ¬∑ Logic Flow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root {
      --bg: #050816;
      --primary: #22c55e;
      --accent: #a5b4fc;
      --text-main: #e5e7eb;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0; padding: 0; height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
      background: #020617;
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    body { display: flex; justify-content: center; align-items: stretch; }

    .app-shell {
      width: 100%; max-width: 430px; height: 100vh;
      background: #020617;
      overflow: hidden; position: relative;
    }

    /* –ö–ù–û–ü–ö–ò –ò –ò–ù–ü–£–¢–´ */
    .btn-primary {
      width: 100%; padding: 16px; border-radius: 999px; border: none;
      background: linear-gradient(90deg, #16a34a, #22c55e);
      color: #020617; font-weight: 700; font-size: 16px; cursor: pointer;
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.3), 0 15px 35px rgba(22, 163, 74, 0.5);
      transition: transform 0.1s;
    }
    .btn-primary:active { transform: translateY(1px); }

    .input-wrapper { position: relative; margin-bottom: 14px; }
    .input-field {
      width: 100%; padding: 14px 14px 12px; border-radius: 16px;
      border: 1px solid rgba(31,41,55,1); background: rgba(15,23,42,0.96); color: #f9fafb; font-size: 15px;
    }
    .input-label { position: absolute; left: 14px; top: 13px; font-size: 14px; color: #6b7280; pointer-events: none; transition: .18s ease; }
    .input-field:focus + .input-label, .input-field:not(:placeholder-shown) + .input-label {
      top: -7px; left: 11px; font-size: 11px; padding: 0 4px; color: var(--accent); background: #020617; border-radius: 999px;
    }

    /* SPLASH */
    #splash-screen {
      position: absolute; inset: 0; z-index: 100;
      background: #020617;
      display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px;
    }
    .splash-logo { width: 140px; height: auto; margin-bottom: 24px; object-fit: contain; }
    .splash-title { font-size: 24px; letter-spacing: .25em; text-transform: uppercase; color: #e5e7eb; margin-bottom: 8px; text-align: center; }
    .splash-sub { font-size: 11px; letter-spacing: .18em; text-transform: uppercase; color: #6b7280; margin-bottom: 40px; text-align: center; }
    .splash-progress { width: 70%; max-width: 300px; height: 3px; border-radius: 999px; background: rgba(30,41,59, 0.5); overflow: hidden; position: relative; }
    .splash-progress-bar {
      position: absolute; inset: 0;
      background: linear-gradient(90deg, transparent, #22c55e, transparent);
      transform: translateX(-100%);
      animation: splashBar 6s ease-in-out forwards; /* 6 —Å–µ–∫—É–Ω–¥ */
    }
    @keyframes splashBar { 0% { transform: translateX(-100%); } 100% { transform: translateX(0%); } }

    /* AUTH SCREEN */
    #auth-screen {
      position: absolute; inset: 0; z-index: 90; display: none;
      justify-content: center; align-items: center; padding: 20px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(15,23,42,1));
    }
    .auth-card {
      width: 100%; max-width: 360px; background: #0b1120;
      border-radius: 28px; padding: 26px 22px; border: 1px solid rgba(31,41,55,1);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
    }
    .auth-tabs { display: flex; background: rgba(15,23,42,0.5); padding: 4px; border-radius: 99px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.05); }
    .tab { flex: 1; padding: 8px; border: none; background: none; color: #6b7280; border-radius: 99px; font-size: 14px; cursor: pointer; transition: 0.2s; }
    .tab.active { background: rgba(255,255,255,0.1); color: #fff; font-weight: 600; }
    
    .social-login { display: flex; justify-content: center; gap: 12px; margin-top: 20px; }
    .social-btn { width: 44px; height: 44px; border-radius: 12px; border: 1px solid #334155; background: #1e293b; color: #e5e7eb; display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; transition: 0.2s; }
    .social-btn:hover { background: #334155; }
    .divider { display: flex; align-items: center; margin: 20px 0 0; font-size: 12px; color: #6b7280; }
    .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #334155; }
    .divider span { padding: 0 10px; }

    /* PROFILE MODAL */
    #profile-modal {
      position: absolute; inset: 0; z-index: 95; display: none;
      justify-content: center; align-items: flex-end; padding: 0 12px 16px;
      background: rgba(0,0,0,0.8); backdrop-filter: blur(4px);
    }
    #profile-modal.visible { display: flex; }
    .profile-card {
      width: 100%; max-width: 420px; background: #0b1120;
      border-radius: 26px; border: 1px solid rgba(31,41,55,1);
      padding: 24px; box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
      animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    .pill-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; margin-top: 10px; }
    .pill { padding: 8px 14px; border-radius: 99px; border: 1px solid #1f2937; background: #0f172a; color: #9ca3af; font-size: 13px; cursor: pointer; }
    .pill.selected { border-color: #22c55e; background: rgba(34,197,94,0.15); color: #bbf7d0; }

    /* MAIN SCREEN */
    #main-screen { position: absolute; inset: 0; padding: 20px; display: none; }
    .app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .avatar-circle { width: 40px; height: 40px; border-radius: 50%; background: #334155; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body>

<div class="app-shell">

  <div id="splash-screen">
    <img src="logo_2.png" alt="Guide du D√©tour" class="splash-logo" onerror="this.style.display='none'; document.getElementById('fallback-logo').style.display='block';" />
    <div id="fallback-logo" style="font-size:50px; display:none; margin-bottom:20px;">üåÄ</div>
    <div class="splash-title">GUIDE DU D√âTOUR</div>
    <div class="splash-sub">Chargement...</div>
    <div class="splash-progress"><div class="splash-progress-bar"></div></div>
  </div>

  <div id="auth-screen">
    <div class="auth-card">
      <h1 class="auth-title" style="color:white; margin:0 0 6px;">Bienvenue</h1>
      <p id="auth-subtitle" style="color:#9ca3af; margin-bottom:20px; font-size:14px;">Connectez-vous pour continuer.</p>

      <div class="auth-tabs">
        <button class="tab active" id="tab-login">Connexion</button>
        <button class="tab" id="tab-register">Inscription</button>
      </div>

      <div class="input-wrapper">
        <input type="email" id="email" class="input-field" placeholder=" " />
        <label class="input-label">Email</label>
      </div>
      <div class="input-wrapper">
        <input type="password" id="pwd" class="input-field" placeholder=" " />
        <label class="input-label">Mot de passe</label>
      </div>

      <button id="btn-auth-action" class="btn-primary" style="margin-top:10px;">Se connecter</button>

      <div class="divider"><span>ou via</span></div>
      <div class="social-login">
        <button class="social-btn" title="Apple">Ô£ø</button>
        <button class="social-btn" title="Google">G</button>
        <button class="social-btn" title="Facebook">Fb</button>
      </div>
    </div>
  </div>

  <div id="profile-modal">
    <div class="profile-card">
      <h3 style="margin-top:0; font-size:20px; color:#fff;">Cr√©ez votre profil</h3>
      <p style="color:#9ca3af; font-size:14px;">Configurez vos pr√©f√©rences pour vos premiers d√©tours.</p>
      
      <div class="input-wrapper">
        <input id="profile-name" class="input-field" placeholder=" " />
        <label class="input-label">Votre Pr√©nom</label>
      </div>

      <div style="font-size:13px; color:#fff; margin-top:15px;">Vos int√©r√™ts :</div>
      <div class="pill-grid">
        <button class="pill">üè∞ Ch√¢teaux</button>
        <button class="pill">üç∑ Vin</button>
        <button class="pill">üå≤ Nature</button>
        <button class="pill">üç∞ Gastronomie</button>
      </div>

      <button id="btn-save-profile" class="btn-primary">Enregistrer</button>
    </div>
  </div>

  <div id="main-screen">
    <header class="app-header">
      <div>
        <h2 style="margin:0; color:#fff;">Bonjour !</h2>
        <p style="margin:0; color:#9ca3af; font-size:14px;">Pr√™t pour un d√©tour ?</p>
      </div>
      <div class="avatar-circle" id="main-avatar">U</div>
    </header>
    
    <div style="padding: 20px; border:1px solid #1f2937; border-radius:16px; background:rgba(15,23,42,0.5); text-align:center; color:#6b7280;">
      <div style="font-size:40px; margin-bottom:10px;">üó∫Ô∏è</div>
      –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–∞—Ä—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞.
    </div>
  </div>

</div>

<script>
  // --- ELEMENTS ---
  const els = {
    splash: document.getElementById('splash-screen'),
    auth: document.getElementById('auth-screen'),
    main: document.getElementById('main-screen'),
    profile: document.getElementById('profile-modal'),
    
    tabLogin: document.getElementById('tab-login'),
    tabRegister: document.getElementById('tab-register'),
    authBtn: document.getElementById('btn-auth-action'),
    authSub: document.getElementById('auth-subtitle'),
    
    socialBtns: document.querySelectorAll('.social-btn')
  };

  // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: true = –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, false = –í—Ö–æ–¥
  let isRegisterMode = false;

  // --- INIT ---
  document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
      els.splash.style.display = 'none';
      // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º Auth –¥–ª—è —Ç–µ—Å—Ç–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
      // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ç—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ localStorage
      els.auth.style.display = 'flex'; 
    }, 6000); // 6 —Å–µ–∫—É–Ω–¥
  });

  // --- TABS LOGIC ---
  els.tabLogin.addEventListener('click', () => {
    setAuthMode(false);
  });

  els.tabRegister.addEventListener('click', () => {
    setAuthMode(true);
  });

  function setAuthMode(isRegister) {
    isRegisterMode = isRegister;
    
    if (isRegister) {
      els.tabRegister.classList.add('active');
      els.tabLogin.classList.remove('active');
      els.authBtn.textContent = "Cr√©er un compte";
      els.authSub.textContent = "Cr√©ez un compte pour commencer.";
    } else {
      els.tabLogin.classList.add('active');
      els.tabRegister.classList.remove('active');
      els.authBtn.textContent = "Se connecter";
      els.authSub.textContent = "Connectez-vous pour continuer.";
    }
  }

  // --- AUTH ACTION (–ö–Ω–æ–ø–∫–∞ Email) ---
  els.authBtn.addEventListener('click', () => {
    handleAuthFlow();
  });

  // --- SOCIAL ACTION (–ö–Ω–æ–ø–∫–∏ —Å–æ—Ü—Å–µ—Ç–µ–π) ---
  els.socialBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      // –°–æ—Ü—Å–µ—Ç–∏ –≤–µ–¥—É—Ç —Å–µ–±—è —Ç–∞–∫ –∂–µ: –µ—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -> –ü—Ä–æ—Ñ–∏–ª—å, –∏–Ω–∞—á–µ -> –ì–ª–∞–≤–Ω–∞—è
      handleAuthFlow();
    });
  });

  // --- MAIN FLOW LOGIC ---
  function handleAuthFlow() {
    // 1. –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    els.auth.style.display = 'none';
    
    // 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (–æ–Ω –≤—Å–µ–≥–¥–∞ –≤–Ω–∏–∑—É)
    els.main.style.display = 'block';
    
    // 3. –õ–û–ì–ò–ö–ê –í–ï–¢–í–õ–ï–ù–ò–Ø
    if (isRegisterMode) {
      // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∞ –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø (–Ω–æ–≤—ã–π —é–∑–µ—Ä) -> –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
      els.profile.classList.add('visible');
    } else {
      // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª –í–•–û–î (—Å—Ç–∞—Ä—ã–π —é–∑–µ—Ä) -> –ü—Ä–æ—Ñ–∏–ª—å –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ–º, –æ—Å—Ç–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º
      // (–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, main —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω)
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥ "–∑–∞–ª–æ–≥–∏–Ω–µ–Ω"
    localStorage.setItem('gddLoggedIn', '1');
    updateAvatar();
  }

  // --- PROFILE SAVE ---
  document.getElementById('btn-save-profile').addEventListener('click', () => {
    const name = document.getElementById('profile-name').value;
    if(name) {
      localStorage.setItem('gddName', name);
      updateAvatar();
    }
    els.profile.classList.remove('visible');
  });

  // --- UTILS ---
  document.getElementById('main-avatar').addEventListener('click', () => {
    // –ü–æ –∫–ª–∏–∫—É –Ω–∞ –∞–≤–∞—Ç–∞—Ä –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
    els.profile.classList.add('visible');
  });

  function updateAvatar() {
    const name = localStorage.getItem('gddName') || 'User';
    document.getElementById('main-avatar').textContent = name.charAt(0).toUpperCase();
  }

  document.querySelectorAll('.pill').forEach(p => 
    p.addEventListener('click', () => p.classList.toggle('selected'))
  );

</script>
</body>
</html>
